
-------------------
Tue Jul  3 14:27:37 BST 2007

      Things to add or fix before 0.4


   o Do the strand restraints work well under refinement?

   o Try again to add chiral volumes to the geometry target function

   o Alice Dawson SSM Problem, 1pyd.  Message sent to Eugene -
     He says no problem.  Therefore small example program is required
     to find the problem in SSM (or elsewhere of course).

   o Frank's SSM crash.

   o Don't display symmetry with hydrogens if the main molecule
     doesn't have them [Steven Graham]

   o Post-install slim the binaries

   o Test Cootaneer by building from just a map.

   o Build against new clipper (delete clipper from all autobuild trees).

   o Check where else we do a SetSpaceGroup().  Bug there too?

   o Where else do I mess with the space group like I did at the end of 
     unshelxing?  Fix that too.

   o Fix non-orthorhombic aniso Us.

   o Correct CISPEP if needed cards on writing pdb.
     Hand off to Eugene for now.

   o res098 from Lionel Colliandre - alt conf occ resetting problem on
     regularize. 

   o "Environment distances that label everything" - David Briggs

   o Carsten's Map Masking crash





   o Richardson rotamers

* Done.

   o history doesn't quote set-display-intro-string and
     handle-read-draw-molecule-with-recentre - it should.

* Done.

   o Activate test suite

* Done.

   o Fix Cootaneer crash

* Done.  It was a problem in trim_atom_label_table().

   o Multiple models overlapping does not delete the non-best fitting
     models. It should.

* It does - I don't know why I thought that it didn't.  Hmm...

   o specify default working molecule for water addition (esp. for
     key-bound water addition) [JED]

* Done.  You need to set it using "Place Atom at Pointer" molecule
  chooser (then Cancel that dialog).

   o are the findwaters and findligands being installed correctly
     (with wrappers?).  Get a pre-release tar ball and look at that.

* Seems fine.  Ask eleanor to run it on the command line

   o Make the Omega Angle Plot update properly in
     update_geometry_graphs()

* Done.

   o C key press in the graphics runs the graphics-general-key-press-hook.  
     It should not.

* Fixed.

   o When refining, add a status bar message that describes the Ctrl
     button usage.

* Done. 

   o Is there a memory problem in unshelx?  Valgrind it, I suppose.

* Yes, there was.  Messing with copying the Space group name.  No need
  SetSpaceGroup() does a string copy.

   o try read phs, read a pdb to get cell, pdb file does not have cell
     -> crash. 	deliang chen <deliangc@uci.edu>
       Subject: 	Re: [ccp4bb] Wincoot 0.3.3(Zeta) crash help
       Date: 	Fri, 27 Jul 2007 00:26:26 +0200  (Thu, 23:26 BST)

* Seems OK under valgrind - a WinCoot bug?

   o Crash report by "Gajiwala, Ketan": CR in graphics after Acc/Rej
     was deleted.

* Fixed.

   o Get B factors from shelx Us (for B factor variance plot)

* Done.

   o Crash report by "Gajiwala, Ketan": CR in graphics after Acc/Rej
     was deleted.

* Fixed (I guess).

   o re-work the cootaneering gui, use a sub-menu.

* Done.

   o Ignore hydrogens in B-factor variance plot

* Done     

   o auto-read-shelx-project: check if fcf is more recent than fcf.cif
     before auto-loading fcf.cif

* Done.

   o Add a PIR sequence reader for cootaneering

* Done.

   o Add select by sphere to test suite

* Done.

   o Add planar peptide restraints as default

* Done.

   o Add Chiral centre inversion and cis peptide generation check 
     after refinement or regularization.

     - move bad_chiral_volumes() to coot-coord-extras and use it to
     check chiral volumes after refinement (i.e. we should get a
     warning info_dialog on top of (displayed after) the Accept/Reject
     dialog. 

* Actually, simple-restraint.cc was the right place because coot-utils
  are low level and don't use simple-restraint.hh

     Also test a mmdb for a cis peptide.  Add that function to
     coot-coord-utils.hh 
	
     std::vector<std::pair<coot::residue_spec_t, coot::residue_spec_t> > 
	test_for_cis_peptides(CMMDBManager *fragment_mol);

* Done - I'm not sure I like the way the dialogs work... but perhaps
  too much warning is better than not enough?

   o Gtk Timeout for reading socket strings

* Done in 0.3.2 in fact.

   o Select residues (for new molecule) by sphere

* Done

   o Multiple model ligand overlaying

* Done.

   o Cootaneer

* Done.

   o fix db-main so that it doesn't spew error messages

* Done.  Trivial

   o unshelxing is interfering with go to atom from lst file reader.
     How about this cunning plan:  
     (shelx-lst-conversion-func imol) returns a function that takes
     the lst residue number as an arg and returns a (list chain-id
     resno).  The body of the returned func will depend on the output
     of unshelx().

    CMMDBManager *unshelx(CMMDBManager *mol);
    need to also return mapping info
    vector of 
    [input_threash -> (chain-id resno-offset)]
    i.e. if residue_num >= input_threash we have a given chain-id and
    resno offset.
    run over all sets of [input_threash -> (chain-id resno-offset)] to get the 
    correct offset

* Done.

-----

To compile guile etc for gtk2:


prfx=$HOME/guile-1.8.1
wget libtool-1.5.22.tar.gz
cd libtoo-1.5.22
./configure --prefix=$prfx
make 
make install

wget guile-1.8.1.tar.gz
cd guile-1.8.1
./configure --prefix=$prfx CFLAGS=-I$prfx/include LDFLAGS=-L$prfx/lib
# on cycle at least, we need to stop the optimization:
./configure --prefix=$prfx "CFLAGS=-I$prfx/include -g" LDFLAGS=-L$prfx/lib
make 
make install

wget guile-gtk-2.0.tar.gz
cd guile-gtk-2.0
./configure --prefix=$prfx --without-gtkgl

 --------
  
   Things to fix before 0.3.2

   o Change the Release notes, 
     the ChangeLog, 
     configure.in (obviously)
     old coot timer


   o Ramachandran Plot and Kleywegt Plot interact badly causing crash.

* Fixed.  Simply we can't have both.

   o Fix the carriage return on Check Delete waters result.  It should
     do a next button, not a click on the OK button.

* Easy fix - done in glade.

   o set-map-display, set-mol-displayed, set-mol-active.  Do they
     properly toggle the buttons in the Display Manager?  They should.

* They didn't.  They do now.  It worked first time :)

   o Fix the File-name filter: in script file reading

* Done.

   o Sort out the Cholesky decomposition.  Question to self: what are
     the matrices that are being decomposed, exactly?
     
     Good question.  That broke the back of the problem actually.  I
     compared thox.pdb Us with thos.res Us and found they were
     different (a transposition).  Now U matrix principal minors are
     checked before cholesky decomposition is performed.

 * Done!

   o mainchain zone, reverse dir, mainchain zone, screwed mainchain

* Done.

   o residue range was inserted into the wrong place in the pdb file

* Done.

   o copy fragment, residue range miss - feedback required.

* Done.

   o optionally animate fit-waters

* Done.

   o Mask map should have an inversion check button.

* Done.

   o Kleywegt plots don't update properly when not specifying chains.

* Done.

   o Saving in another directory - remember the save dir for next
     molecule to be saved.

* Done.

   o copy fragment, residue range miss - feedback required.

* Done.     

   o Disappearing NCS ghosts on changing NCS master 

     Also:

	Coot behaves differently depending on which chain I've chosen
	as the "master". When A is master, I can click the display box
	on/off and it simply displays (or hides) the ghost chains with
	no fuss. However, if I chosen a different chain as master,
	then each time I turn the ghosts on it recalculates the entire
	alignment.

* Done.

   o Thick bonds do not get set/groked in state file - they should be.

* Done.

   o transform-map

* Done.

   o Multiple coordinate molecules, inconsistent when starting up go
     to atom window.  Residue tree not same molecule as molecule
     chooser.  It only fails on startup.

* Fixed.

   o Do residue refinement after nucleotide add terminal residue (or
     can it be done trivially using the same mechanism as
     add-terminal-resdue-do-post-refine?

* Man, that was hard work.  Needed nucleotide to nucleotide function

   o Bad logic in setting display/active for molecules (Bob Nolte bug)

        If I turn on the display manager in my .coot file, and then
        load a coot state file which toggles off some of the loaded
        structures, the display manager gets confused and shows the
        wrong state.

* Fixed.

   o fix this:

	Kevin was doing some building and Coot lost the spacegroup.
	Adding UNK terminal residues
	Reversing the chain direction (probably this one?)
	db-main for new mainchain

* Done. Trival error in transfering spacegroup string.  Fixed malloc
  error in show-spacegroup while debugging this, which was much more
  important.

   o Stereo buttons need to be fixed

       Need to check that wall and cross eyes work

* Done.

   o Fix text widget in Sequence reading code (e.g. Fit Loop)

* Done.

   o Residue Info edits not being applied

* Done.

   o Delete a View number

* Done.

   o Save views to view file.

* Done.

   o Ramachandran plot window should remember where it was put

* Done.

   o Colour by B-factor

* Done

   o Colour by occupancy

* Done

   o Fix text widget in About 

* Done.

   o Alt confs fly apart in regularization of ligands.

* Done.

   o CNS map reading

* Done.

   o CNS data reading

* Kevin says leave it.  Fine.

   o Juergen's bad map

* Hand off to Kevin, bad map.

   o Put a file selector on the shelxl refine interface.

* Done.

   o Spin View 

* Done.

-------

# gtkglext:
wget "http://downloads.sourceforge.net/gtkglext/gtkglext-1.2.0.tar.gz?modtime=1139081517 & big_mirror=1"


# make sure when you compile guile-gtk-2.0, you pick up the right
# guile in your path (i.e. 1.8.x) otherwise libguile will be stuck in
# the guilegtk.la file and it wil cause a mess.


 ----- 
Sat Apr 28 16:21:54 BST 2007

   Those who compile with gtk2 need to regenerate the interface files
   coot_wrap_guile.cc and coot_wrap_guile_pre.cc by runing swig
   (delete them and make)


----
Wed May  2 11:20:29 BST 2007

   for shelx molecules:

   symmetry-related hydrogens don't appear (they flash off)

----
Wed May  2 15:40:02 BST 2007

	Residue info edits need testing.

* Done.

----
Thu May  3 10:26:10 BST 2007

   intelligent next atom should consider insertion codes.
   (how tedious).

------
Wed May  9 13:54:04 BST 2007

   Dirk Kostewa:
   overblend for electron density?


-----
Thu May 10 16:03:56 BST 2007

   How should "Check for updates" work.

   In scheme, of course

   It should know the current coot-version

   It needs to get the latest stable relesed version and 
   the release notes for that.

   So the release notes should be on the web site.  I think that they
   are...

   So it needs to get the current stable release version (a string)
   from the web site.  How shall that be done?

      get the stable release binary list web page.  Search as we do
      for the latest coot version as we do in the build-it file (that
      involves awk).

   Then, if there is a new release, get the release notes file and put
   the contents into a scrolled text window.

-----

trying to run render without render in path:


rendering ray trace number: 0
rendering ray trace number: 1
rendering ray trace number: 2
rendering ray trace number: 3
done raytrace.
calling render...
calling display...
((safe_scheme_command) Error in proc: key:  system-error  args:  (execlp ~A (No such file or directory) (..... scm_catch done 
scm_catch returns: 20152

2)))
..... scm_catch done 
scm_catch returns: #<unspecified>

Xlib: unexpected async reply (sequence 0xb9f30)!
Xlib: unexpected async reply (sequence 0xb9f4a)!
Xlib: unexpected async reply (sequence 0xb9f4b)!
Xlib: unexpected async reply (sequence 0xba0b6)!
Xlib: unexpected async reply (sequence 0xba0f1)!
Xlib: unexpected async reply (sequence 0xba0f3)!
lt-coot-real: Fatal IO error 14 (Bad address) on X server :0.0.

Some deprecated features have been used.  Set the environment
variable GUILE_WARN_DEPRECATED to "detailed" and rerun the
program to get more information.  Set it to "no" to suppress
this message.
ObjectCache: Leaked 0002 refs to <P 31 2" Nuvw = ( 240, 240, 132)>
ObjectCache: Leaked 0002 refs to <P 31 2">
47.510u 14.504s 12:56.93 7.9%   0+0k 0+0io 160pf+0w


interesting!


------


  how about a "density at point" function exported to the scripting
  layer.  Then the "delete atoms below a certain level" can be done in
  scheme.


-----
Sun May 13 13:33:46 BST 2007



INFO:: There were 2 maps contributing to the average
INFO:: rescaling by 0.5
==4884== 
==4884== Invalid read of size 2
==4884==    at 0x824D42B: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (molecule-class-info-ncs.cc:672)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x4C32162: gtk_button_clicked (in /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==    by 0x4C33DAD: (within /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==  Address 0x777C2E8 is 0 bytes after a block of size 522,720 alloc'd
==4884==    at 0x4022DC5: operator new(unsigned) (vg_replace_malloc.c:163)
==4884==    by 0x824EBB3: std::vector<short, std::allocator<short> >::_M_fill_insert(__gnu_cxx::__normal_iterator<short*, std::vector<short, std::allocator<short> > >, unsigned, short const&) (new_allocator.h:88)
==4884==    by 0x824CE08: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (stl_vector.h:658)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884== 
==4884== Invalid write of size 4
==4884==    at 0x824D440: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (molecule-class-info-ncs.cc:676)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x4C32162: gtk_button_clicked (in /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==    by 0x4C33DAD: (within /usr/lib/libgtk-x11-2.0.so.0.1000.11)
==4884==  Address 0x79DE3E8 is 0 bytes after a block of size 1,045,440 alloc'd
==4884==    at 0x4022DC5: operator new(unsigned) (vg_replace_malloc.c:163)
==4884==    by 0x824F144: clipper::Xmap<float>::Xmap(clipper::Xmap<float> const&) (new_allocator.h:88)
==4884==    by 0x824C089: molecule_class_info_t::ncs_averaged_maps(clipper::Xmap<float> const&, float) (molecule-class-info-ncs.cc:587)
==4884==    by 0x824D8ED: molecule_class_info_t::make_dynamically_transformed_maps(int, short, float) (molecule-class-info-ncs.cc:472)
==4884==    by 0x813EB8B: make_dynamically_transformed_ncs_maps (c-interface-ncs.cc:299)
==4884==    by 0x813F5A1: make_dynamically_transformed_ncs_maps_by_widget (c-interface-ncs.cc:374)
==4884==    by 0x81E5C04: on_ncs_maps_ok_button_clicked (callbacks.c:5746)
==4884==    by 0x509D9D8: g_cclosure_marshal_VOID__VOID (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x509062A: g_closure_invoke (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A1102: (within /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A2626: g_signal_emit_valist (in /usr/lib/libgobject-2.0.so.0.1200.11)
==4884==    by 0x50A27E8: g_signal_emit (in /usr/lib/libgobject-2.0.so.0.1200.11)n
INFO:: 0 out of 228096 (0%) map points  were masked out of NCS average target volume,  chain A
INFO:: made 1 averaged map(s)
Map statistics: mean: -0.000679089 st.d: 0.480031
Map statistics: min: -1.48057, max: 4.66996


----
Sun May 13 16:23:53 BST 2007


what should active residue do when it is looking at (centred on) a water?


-----
Mon May 14 08:24:42 BST 2007


 add library file in "Do you want to run auto-save state file?" window


-----
Mon May 14 08:50:14 BST 2007

	Go To Atom fails in Gtk1 now.
	
Gtk-WARNING **: invalid cast from `GtkList' to `GtkTree'

Gtk-CRITICAL **: file gtktree.c: line 379 (gtk_tree_clear_items): assertion `GTK_IS_TREE (tree)' failed.

** WARNING **: Widget not found: go_to_atom_atom_list

Gtk-WARNING **: invalid cast from (NULL) pointer to `GtkList'

Gtk-CRITICAL **: file gtklist.c: line 1258 (gtk_list_clear_items): assertion `list != NULL' failed.

Gtk-WARNING **: invalid cast from `GtkList' to `GtkTree'

Gtk-CRITICAL **: file gtktree.c: line 200 (gtk_tree_append): assertion `GTK_IS_TREE (tree)' failed.

Gtk-CRITICAL **: file gtkwidget.c: line 3359 (gtk_widget_set_parent): assertion `parent != NULL' failed.

Gtk-WARNING **: invalid cast from (NULL) pointer to `GtkObject'
Segmentation fault (core dumped)

----
Tue May 15 23:59:45 BST 2007

have a look at this:

src/graphics-info-navigation.cc:            std::cout << "WARNING: (Programmer error) looking for atoms "

it was related (I'm pretty sure) with the AZ NCS crash.

-----
Wed May 16 09:27:21 BST 2007

	User pickable atoms:

	a function that registers interest in n atom selections and a
	function to call when it has them.  We test in
	graphics-info-defines whether such a function exists and has
	all the number of picks that it needs, if it does and it
	doesn't then collect them and pass them on when it has all
	it needs.  When the function has been called delete it from
	the queue/vector of such functions (umm, better do the
	deletion just before the function call so that if there is an
	error in the scm function we don't jump away from the function
	deletion part).

------
Thu May 17 18:20:51 BST 2007

Christopher Rife:

   I've noticed that when using "NCS Control" in Coot, it behaves
   differently depending on which chain I've chosen as the
   "master". When A is master, I can click the display box on/off and
   it simply displays (or hides) the ghost chains with no
   fuss. However, if I chosen a different chain as master, then each
   time I turn the ghosts on it recalculates the entire
   alignment. This is rather cumbersome with large structures...

* Fixed.


-----
Wed May 16 20:30:02 BST 2007

	CA representation by default:

       Swanand	sg363@mole.bio.cam.ac.uk

----
Thu May 17 12:44:56 BST 2007

	use gtk_widget_get_name(widget) to find out about what type a
	widget is.

------
Thu May 24 10:59:16 BST 2007

	Copy a molecule.

	Save state, by exiting

	retstart.  dialog says there are 2 molecules in state file.
	
	But only one is loaded.  

	Is that right?

------
Sun May 27 19:21:11 BST 2007

   o Merge a fragment, change chain ids by residue range (40-50)

   o The GoTo Atom residue tree looks messed up (nothing beyond 50)

   on writing out the PBD file, residue 50 is in the right place, but
   40-49 have been writen to the end of the chain.  Which causes the
   problem in the Go To Atom window.

* Fixed.


-----
Fri Jun 15 13:09:53 BST 2007

   rajiv.chopra@novartis.com:

   In real space refinement, don't move the atoms with zero occ.

------

  old guile convert to string:
    std::string name_target = SCM_STRING_CHARS(name_target_scm);
   new guile convert to string:
    std::string name_target = scm_to_locale_string(name_target_scm);

   all guile convert from string:
      SCM mess = scm_makfrom0str(a_string.c_str());


-----
Thu Jun 21 11:57:16 CEST 2007

    
   Fitting a helix in a low resolution and low level (0.02 e) map.  

   Density looked reasonable for a helix, but was rejected on CB
   density.

   Should the be less strict for CB density at lower resolutions? 
   What is the cut-off criteria for CB density?

* There was a hard-wired cut off 0.2 in the helix fitting.  Make
  variable and moved upstairs to the invoking function.

----
Thu Jun 21 13:35:07 CEST 2007

  Randy Read:

  It's currently tedious to make a native patterson.  So add an option
  to do it for me.  You'll have to change the space group to have the
  symmetry of the Patterson and make up a column of zeros for the phase.

  (patterson mtz-filename f-col origin-remove-flag) returns an int


----
Thu Jun 21 14:35:28 CEST 2007


   Problem with doing Randy's sidebyside screen update:

   to solve his problem we want to 
	draw(glarea1)
	draw(glarea2)
	swap_buffers(glarea1)
	swap_buffers(glarea2)

   so we have to move swap_buffers *out* of the draw() function. 

   OK, I did that.

   The problem now is with the expose_event callback.

   the expose event callback is what is used by draw()

   urgh.

* Anyway, fixed now.

---
Mon Jun 25 08:20:12 BST 2007

   Do this at some stage (but not before 0.3.2)

   o Valgrind long/multiple fit-proteins


----
Tue Jul  3 21:45:19 BST 2007

   o better documentation for skip-to-next-ncs-chain

---

  Steven Graham:

     I had just another minor quibble with coot... If one reads in a
     molecule with hydrogens in the PDB file, and one turns the
     display of hydrogens off using 'Edit > Bond Parameters', any
     symmetry-related molecules that are drawn still have protons
     displayed.

     Is there an easy way to not display protons for symmetry
     molecules?

  This is a bug. 

  Priority: High.


---- 
Wed Jul  4 12:58:51 BST 2007

   o copy over sgi coot 0.3.3

* Done.


------
Fri Jul  6 13:24:43 BST 2007

  compiling guile-2.8.1

prfx=$HOME/testg

./configure --prefix=$prfx LDFLAGS=-L$prfx/lib CFLAGS="-g -I$prfx/include"

 ./configure --prefix=/lmb/wear/emsley/testg LDFLAGS=-L/lmb/wear/emsley/testg/lib CFLAGS='-O -I/lmb/wear/emsley/testg/include'

i.e. NO DEBUGGING!


cycle ~/compile/g/guile-gtk-2.0> ./configure --prefix=/lmb/wear/emsley/guile-1.8.1  --without-gtkgl

make 
make install

-
in guile-gtk-2.0's gdk-glue.c add

#define PANGO_PIXELS_CEIL(d) (((int)(d) + 1023) >> 10)
#define PANGO_PIXELS_FLOOR(d) (((int)(d)) >> 10)

- 
also need goosh:
./configure --prefix=/lmb/wear/emsley/guile-1.8.1
make install
and guile-gui:
 ./configure --prefix=/lmb/wear/emsley/guile-1.8.1
make install
and net-http:
 ./configure --prefix=/lmb/wear/emsley/guile-1.8.1
make install


  From Stephano Benini, deleting waters:


  Using host libthread_db library "/lib/tls/libthread_db.so.1".
Core was generated by `/apps/xtal/coot/current/linux/bin/coot-real'.
Program terminated with signal 11, Segmentation fault.
#0  CAtom::GetChainID (this=0x2ed9) at mmdb_atom.cpp:758
	in mmdb_atom.cpp
#0  CAtom::GetChainID (this=0x2ed9) at mmdb_atom.cpp:758
#1  0x0823df36 in molecule_class_info_t::make_atom_label_string (this=0xb4be400c, atom=0x2ed9, 
    brief_atom_labels_flag=0) at molecule-class-info.cc:4233
#2  0x08232a57 in molecule_class_info_t::label_atom (this=0xb4be400c, i=11993, 
    brief_atom_labels_flag=0) at molecule-class-info.cc:2464
#3  0x08229b1d in molecule_class_info_t::label_atoms (this=0xb4be400c, brief_atom_labels_flag=0)
    at molecule-class-info.cc:450
#4  0x081cbd9b in draw_mono (widget=0x8689698, event=0x2ed9, in_stereo_flag=0) at globjects.cc:1756
#5  0x081cb9bd in draw (widget=0x8689698, event=0xbfffc160) at globjects.cc:1552
#6  0x081cb8a7 in expose (widget=0x8689698, event=0xbfffc160) at globjects.cc:1501
#7  0xb6ecb659 in gtk_marshal_BOOL__POINTER (object=0x8689698, 
    func=0x81cb896 <expose(_GtkWidget*, _GdkEventExpose*)>, func_data=0x0, args=0x2ed9)
    at gtkmarshal.c:28
#8  0xb6efae92 in gtk_handlers_run (handlers=0x86399b8, signal=0xbfffbe10, object=0x8689698, 
    params=0xbfffbe70, after=0) at gtksignal.c:1917
#9  0xb6efa19e in gtk_signal_real_emit (object=0x8689698, signal_id=25, params=0xbfffbe70)
    at gtksignal.c:1477
#10 0xb6ef8274 in gtk_signal_emit (object=0x8689698, signal_id=25) at gtksignal.c:552
#11 0xb6f2e087 in gtk_widget_event (widget=0x8689698, event=0xbfffc160) at gtkwidget.c:2864
#12 0xb6f3289e in gtk_widget_real_draw (widget=0x8689698, area=0xbfffc500) at gtkwidget.c:4585
#13 0xb6ecb7a5 in gtk_marshal_NONE__POINTER (object=0x8689698, 
    func=0xb6f3279c <gtk_widget_real_draw>, func_data=0x0, args=0x2ed9) at gtkmarshal.c:193
#14 0xb6efa0af in gtk_signal_real_emit (object=0x8689698, signal_id=8, params=0xbfffc250)
    at gtksignal.c:1440
#15 0xb6ef8274 in gtk_signal_emit (object=0x8689698, signal_id=8) at gtksignal.c:552
#16 0xb6f2cce1 in gtk_widget_draw (widget=0x8689698, area=0xbfffc500) at gtkwidget.c:2335
#17 0x0814e321 in graphics_draw () at graphics-info.h:733
#18 0x0818e762 in delete_atom (imol=0, chain_id=0x869b484 "W", resno=132, 
    ins_code=0x89e6620 "0f\236\b", at_name=0x8faa88c " O  ", altLoc=0x854a0fc "")
    at c-interface-build.cc:865
#19 0x0818f4c0 in delete_atom_by_atom_index (imol=0, index=2954, do_delete_dialog=1)
    at /usr/include/c++/3.2/bits/basic_string.h:781
#20 0x08133e28 in graphics_info_t::check_if_in_delete_item_define (this=0xbfffc8a3, 
    event=0x86167b0, state=@0x2ed9) at graphics-info-defines.cc:657
#21 0x08132ba3 in graphics_info_t::check_if_in_range_defines (this=0xbfffc8a3, event=0x86167b0, 
    state=@0xbfffc8ac) at graphics-info-defines.cc:204
#22 0x081ceac1 in glarea_button_press (widget=0x8689698, event=0x86167b0) at globjects.cc:3394
#23 0xb6ecb659 in gtk_marshal_BOOL__POINTER (object=0x8689698, 
    func=0x81ce816 <glarea_button_press(_GtkWidget*, _GdkEventButton*)>, func_data=0x0, args=0x2ed9)
    at gtkmarshal.c:28
#24 0xb6efae92 in gtk_handlers_run (handlers=0x8639958, signal=0xbfffca10, object=0x8689698, 
    params=0xbfffca70, after=0) at gtksignal.c:1917
#25 0xb6efa19e in gtk_signal_real_emit (object=0x8689698, signal_id=20, params=0xbfffca70)
    at gtksignal.c:1477
#26 0xb6ef8274 in gtk_signal_emit (object=0x8689698, signal_id=20) at gtksignal.c:552
#27 0xb6f2e087 in gtk_widget_event (widget=0x8689698, event=0x86167b0) at gtkwidget.c:2864
#28 0xb6ecb4dc in gtk_propagate_event (widget=0x8689698, event=0x86167b0) at gtkmain.c:1385
#29 0xb6eca5cd in gtk_main_do_event (event=0x86167b0) at gtkmain.c:818
#30 0xb6e23b28 in gdk_event_dispatch (source_data=0x0, current_time=0xbfffce40, user_data=0x0)
    at gdkevents.c:2139
#31 0xb6b68e81 in g_main_dispatch (dispatch_time=0xbfffce40) at gmain.c:656
#32 0xb6b69338 in g_main_iterate (block=0, dispatch=1) at gmain.c:877
#33 0xb6b69568 in g_main_run (loop=0x8845118) at gmain.c:935
#34 0xb6eca08f in gtk_main () at gtkmain.c:524
#35 0x080e8349 in c_inner_main (closure=0x0, argc=1, argv=0xbfffd264) at c-inner-main.c:237
#36 0xb7526864 in invoke_main_func (body_data=0x2ed9) at init.c:635
#37 0xb752682c in scm_boot_guile_1 (base=0xbfffcfac, closure=0xbfffcfb0) at init.c:615
#38 0xb752654b in scm_boot_guile (argc=11993, argv=0x2ed9, main_func=0x2ed9, closure=0x2ed9)
    at init.c:440
#39 0x080e8450 in c_wrapper_scm_boot_guile (argc=1, argv=0xbfffd264) at c-inner-main.c:257
#40 0x080e34b5 in main (argc=1, argv=0xbfffd264) at main.cc:408


* Possibly fixed - reworked labelling code not to use poiners now.


------
Mon Jul  9 18:29:22 BST 2007

   Related to above:

	Add a greg test:

	Add atom (at pointer, I suppose), add atom, add atom.

	Label atoms.

	delete atom 

	delete atom

	delete atom

* Done.

-----
Thu Jul 12 13:13:43 BST 2007

	I was testing sphere atoms.  I had pointer distances up.  I
	going to delete atoms to count them.  Mabye I labelled lots of
	atoms.  I guess I had a go to atom up (maybe not).

	I fired up Delete, changed to delete water, keep active.

	I clicked on an atom

	Boom, crash.

OK, here's how to reproduce:

	start from 0crash.scm
        add pointer distances
	Fire up Go to atom
	Close with top right WM button
	Delete, Delete Atom, Active
	Click an atom
	Crash.


It said this in the console:

INFO:: backup file coot-backup/_home_paule_Projects_build-coot_src_data_rnase_tutorial-modern.pdb_Thu_Jul_12_13:09:49_2007_modification_0.pdb.gz

** WARNING **: Widget not found: go_to_atom_residue_tree
ERROR:: gtktree (go_to_atom_residue_tree) is null!

** WARNING **: Widget not found: go_to_atom_residue_tree

Gtk-WARNING **: invalid cast from (NULL) pointer to `GtkTree'

Gtk-CRITICAL **: file gtktree.c: line 378 (gtk_tree_clear_items): assertion `tree != NULL' failed.

Gtk-WARNING **: invalid cast from (NULL) pointer to `GtkWidget'
Segmentation fault (core dumped)
6.587u 0.512s 18:22.29 0.6%     0+0k 0+0io 226pf+0w


(gdb) where
#0  lookup_widget (widget=0x0, widget_name=0x85d2742 "go_to_atom_atom_list") at ../../coot/src/support.c:40
#1  0x081a9664 in graphics_info_t::fill_go_to_atom_residue_list_gtk1 (gtktree=0x0)
    at ../../coot/src/graphics-info-navigation-gtk1.cc:204
#2  0x081f1cf5 in delete_atom (imol=1, chain_id=0x8a399fc "B", resno=96, ins_code=0x90bcdf0 "",
    at_name=0x91e417c " CB ", altLoc=0x86afce4 "") at ../../coot/src/c-interface-build.cc:859
#3  0x081f2126 in delete_atom_by_atom_index (imol=1, index=0, do_delete_dialog=1)
    at ../../coot/src/c-interface-build.cc:1003
#4  0x0818849b in graphics_info_t::check_if_in_delete_item_define (this=0xbfcb62fb, event=0x8b16008,
    state=@0x0) at ../../coot/src/graphics-info-defines.cc:604
#5  0x08189cc8 in graphics_info_t::check_if_in_range_defines (this=0xbfcb62fb, event=0x8b16008,
    state=@0xbfcb62ec) at ../../coot/src/graphics-info-defines.cc:204
#6  0x08246247 in glarea_button_press (widget=0x8bd9ac0, event=0x8b16008)
    at ../../coot/src/globjects.cc:3400
#7  0x0104e0f9 in gtk_marshal_BOOL__POINTER (object=0x8bd9ac0,
    func=0x8246194 <glarea_button_press(_GtkWidget*, _GdkEventButton*)>, func_data=0x0, args=0x0)
    at gtkmarshal.c:28
#8  0x0107d5c4 in gtk_handlers_run (handlers=0x8b8c840, signal=0xbfcb63a8, object=0x8bd9ac0,
    params=0xbfcb6408, after=0) at gtksignal.c:1917
#9  0x0107e5c1 in gtk_signal_real_emit (object=Variable "object" is not available.
) at gtksignal.c:1477
#10 0x0107eb80 in gtk_signal_emit (object=Variable "object" is not available.
) at gtksignal.c:552
#11 0x010b65a3 in gtk_widget_event (widget=0x8bd9ac0, event=0x8b16008) at gtkwidget.c:2864
#12 0x0104daec in gtk_propagate_event (widget=0x8bd9ac0, event=0x8b16008) at gtkmain.c:1378
#13 0x0104de1e in gtk_main_do_event (event=0x8b16008) at gtkmain.c:818
#14 0x006f9ed3 in gdk_event_dispatch (source_data=0x0, current_time=0xbfcb6800, user_data=0x0)
    at gdkevents.c:2139
#15 0x0072e5ba in g_main_dispatch (dispatch_time=0xbfcb6800) at gmain.c:656
#16 0x0072f0f2 in g_main_iterate (block=Variable "block" is not available.
) at gmain.c:877
#17 0x0104cb93 in gtk_main_iteration () at gtkmain.c:603
#18 0x00f6ad7a in sgtk_gtk_main_iteration () at gtk-glue.c:1617
#19 0x002c0110 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#20 0x002bbfb3 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#21 0x002bd494 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#22 0x002bd867 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#23 0x002bbfb3 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#24 0x002c24dd in scm_dapply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#25 0x002b9ade in scm_apply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#26 0x002b97fc in scm_call_0 () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#27 0x0030a98e in sf_fill_input () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
---Type <return> to continue, or q <return> to quit---
#28 0x002eeae5 in scm_fill_input () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#29 0x002eeb7f in scm_getc () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#30 0x002f689c in scm_flush_ws () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#31 0x002f66e4 in scm_read () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#32 0x002c0763 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#33 0x002bd494 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#34 0x002c0503 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#35 0x002c24dd in scm_dapply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#36 0x002bfa20 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#37 0x002c0503 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#38 0x002c23e2 in scm_dapply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#39 0x002b9ade in scm_apply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#40 0x002b97fc in scm_call_0 () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#41 0x002a9f60 in with_traps_inner ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#42 0x002abcd6 in scm_internal_dynamic_wind ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#43 0x002a9fcb in scm_with_traps () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#44 0x002c0763 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#45 0x002c24dd in scm_dapply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#46 0x002b9ade in scm_apply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#47 0x002b97fc in scm_call_0 () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#48 0x002abb64 in scm_dynamic_wind ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#49 0x002c1594 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#50 0x002c24dd in scm_dapply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#51 0x002b9ade in scm_apply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#52 0x002b97fc in scm_call_0 () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#53 0x0030874e in scm_body_thunk () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#54 0x003085de in scm_internal_lazy_catch ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#55 0x00308bc3 in scm_lazy_catch () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#56 0x002c1594 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#57 0x002c24dd in scm_dapply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#58 0x002b9ade in scm_apply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#59 0x002b97fc in scm_call_0 () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#60 0x0030874e in scm_body_thunk () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#61 0x00308402 in scm_internal_catch ()
---Type <return> to continue, or q <return> to quit---w
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#62 0x00308b47 in scm_catch () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#63 0x002c1594 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#64 0x002bd494 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#65 0x002bd494 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#66 0x002bd494 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#67 0x002c24dd in scm_dapply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#68 0x002b9ade in scm_apply () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#69 0x002b97fc in scm_call_0 () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#70 0x002abb64 in scm_dynamic_wind ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#71 0x002c1594 in scm_deval () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#72 0x002bb039 in scm_i_eval_x () from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#73 0x002bb118 in scm_primitive_eval_x ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#74 0x0030619e in inner_eval_string ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#75 0x002c4461 in scm_c_with_fluids ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#76 0x002c44df in scm_c_with_fluid ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#77 0x002dc454 in scm_c_call_with_current_module ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#78 0x0030620f in scm_eval_string ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#79 0x003060f9 in scm_c_eval_string ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#80 0x081b3c29 in post_scripting_window () at ../../coot/src/c-interface.cc:5473
#81 0x0104e357 in gtk_marshal_NONE__NONE (object=0x8b81ebc, func=0x8296cf8 <on_scripting_window_activate>,
    func_data=0x0, args=0xbfcbb538) at gtkmarshal.c:312
#82 0x0107d5c4 in gtk_handlers_run (handlers=0x8b852b0, signal=0xbfcbb4d8, object=0x8b81ebc,
    params=0xbfcbb538, after=0) at gtksignal.c:1917
#83 0x0107e5c1 in gtk_signal_real_emit (object=Variable "object" is not available.
) at gtksignal.c:1477
#84 0x0107eb80 in gtk_signal_emit (object=Variable "object" is not available.
) at gtksignal.c:552
#85 0x010b29c7 in gtk_widget_activate (widget=0x8b81ebc) at gtkwidget.c:2890
#86 0x010567ff in gtk_menu_shell_activate_item (menu_shell=0x8b80398, menu_item=0x8b81ebc,
    force_deactivate=1) at gtkmenushell.c:859
#87 0x01056b5d in gtk_menu_shell_button_release (widget=0x8b80398, event=0x8b15e98) at gtkmenushell.c:486
---Type <return> to continue, or q <return> to quit---w
#88 0x0104e0f9 in gtk_marshal_BOOL__POINTER (object=0x8b80398,
    func=0x1056914 <gtk_menu_shell_button_release>, func_data=0x0, args=0x0) at gtkmarshal.c:28
#89 0x0107e4a1 in gtk_signal_real_emit (object=Variable "object" is not available.
) at gtksignal.c:1492
#90 0x0107eb80 in gtk_signal_emit (object=Variable "object" is not available.
) at gtksignal.c:552
#91 0x010b65a3 in gtk_widget_event (widget=0x8b80398, event=0x8b15e98) at gtkwidget.c:2864
#92 0x0104daec in gtk_propagate_event (widget=0x8b80398, event=0x8b15e98) at gtkmain.c:1378
#93 0x0104de1e in gtk_main_do_event (event=0x8b15e98) at gtkmain.c:818
#94 0x006f9ed3 in gdk_event_dispatch (source_data=0x0, current_time=0xbfcbbd10, user_data=0x0)
    at gdkevents.c:2139
#95 0x0072e5ba in g_main_dispatch (dispatch_time=0xbfcbbd10) at gmain.c:656
#96 0x0072f0f2 in g_main_iterate (block=Variable "block" is not available.
) at gmain.c:877
#97 0x0072f367 in g_main_run (loop=0x8e76900) at gmain.c:935
#98 0x0104d1ef in gtk_main () at gtkmain.c:524
#99 0x081099e3 in c_inner_main (closure=0x0, argc=1, argv=0xbfcbc094) at ../../coot/src/c-inner-main.c:242
#100 0x002d800c in invoke_main_func ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#101 0x002d7fbd in scm_boot_guile_1 ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#102 0x002d7cc1 in scm_boot_guile ()
   from /home/paule/autobuild/Linux-kalypso-pre-release/lib/libguile.so.12
#103 0x081096b4 in c_wrapper_scm_boot_guile (argc=1, argv=0xbfcbc094) at ../../coot/src/c-inner-main.c:262
#104 0x080f785b in main (argc=1, argv=0xbfcbc094) at ../../coot/src/main.cc:408
Current language:  auto; currently c
(gdb)

----
Thu Jul 12 13:18:27 BST 2007

	get rid of this:

DEBUG:: no molecule number match


-----
Fri Jul 13 11:48:08 BST 2007


  I find the option to use the directories and projects i have defined
  for ccp4i in the coot file-selection menus rather VERY useful. now
  it turns out i do have quite a few projects defined in ccp4, and the
  list runs off the bottom of my screen in coot (while ccp4 breaks it
  over and starts a second column and a third ...). any chance ... ???

  and while you are at it ... would you still have an option to also
  use ccp4 aliases in coot on your 'to think about' list ? this would
  be quite a luxury ... you once said this might be possible ...

* Done.

  ehem ... another idea ... would anybody else be interested in having
  a button to undisplay ALL maps at once in the display menu pop-up
  ???

* A bit of scripting can do this (done).


----
Mon Jul 16 13:09:11 BST 2007

  if the first and last non-blank characters read from the scripting
  window are not ( and ) then add them. So

  read-pdb "test.pdb"

  will "work".


-----

Here's a description of the PIR format:

http://www.cmbi.kun.nl/bioinf/tools/crab_pir.html

----
Tue Jul 17 13:11:20 BST 2007

	Files that end in .fcf or .cif should not *first* be read as
	MTZ files.  Do the sensible thing first.

----
Mon Jul 16 23:18:03 BST 2007

	in creating a GTK2 gl context:


> WARNING:: Can't enable stereo visual - falling back 
> INFO:: Hardware stereo widget opened successfully
> INFO:: switch to hardware_stereo_mode succeeded

So in gl_extras():

We need a "stereo_successful" flag set before we get to saying 
"Hardware stereo widget opened successfully"

----
Tue Jul 31 21:32:53 BST 2007

	crash report on SSMing from Alice Dawson:

using 1pyd.pdb from the EBI:

(mail sent to Eugene)


==18731==
==18731== Mismatched free() / delete / delete []
==18731==    at 0x1B9098CF: operator delete(void*) (vg_replace_malloc.c:155)
==18731==    by 0x1BDCBA3C: CSuperpose::_superpose(CSSGraph*, CSSGraph*, int&) (ssm_superpose.cpp:2683)
==18731==    by 0x1BDCC194: CSuperpose::SuperposeCalphas(CSSGraph*, CSSGraph*, int*, int*, int, CMMDBManager *, CMMDBManager*, int, int) (ssm_superpose.cpp:2424)
==18731==    by 0x1BDBA7C8: CSSMAlign::Align(CMMDBManager*, CMMDBManager*, int, int, int, int) (ssm_align.cp p:200)
==18731==    by 0x81A0394: graphics_info_t::superpose_with_atom_selection(atom_selection_container_t, atom_s election_container_t, int, std::string, std::string, short) (graphics-info-superpose.cc:209)
==18731==    by 0x822FF88: superpose_with_chain_selection (c-interface-superpose.cc:136)
==18731==    by 0x8232162: execute_superpose (c-interface-superpose.cc:306)
==18731==    by 0x829B13D: on_superpose_dialog_superpose_button_clicked (callbacks.c:4748)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C2725C3: gtk_handlers_run (gtksignal.c:1917)
==18731==    by 0x1C2735C0: gtk_signal_real_emit (gtksignal.c:1477)
==18731==    by 0x1C273B7F: gtk_signal_emit (gtksignal.c:552)
==18731==  Address 0x1E6E5588 is 0 bytes inside a block of size 136 alloc'd
==18731==    at 0x1B9095DA: operator new[](unsigned) (vg_replace_malloc.c:138)
==18731==    by 0x1BDCBBF2: CSuperpose::_superpose(CSSGraph*, CSSGraph*, int&) (ssm_superpose.cpp:2617)
==18731==    by 0x1BDCC194: CSuperpose::SuperposeCalphas(CSSGraph*, CSSGraph*, int*, int*, int, CMMDBManager *, CMMDBManager*, int, int) (ssm_superpose.cpp:2424)
==18731==    by 0x1BDBA7C8: CSSMAlign::Align(CMMDBManager*, CMMDBManager*, int, int, int, int) (ssm_align.cp p:200)
==18731==    by 0x81A0394: graphics_info_t::superpose_with_atom_selection(atom_selection_container_t, atom_s election_container_t, int, std::string, std::string, short) (graphics-info-superpose.cc:209)
==18731==    by 0x822FF88: superpose_with_chain_selection (c-interface-superpose.cc:136)
==18731==    by 0x8232162: execute_superpose (c-interface-superpose.cc:306)
==18731==    by 0x829B13D: on_superpose_dialog_superpose_button_clicked (callbacks.c:4748)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C2725C3: gtk_handlers_run (gtksignal.c:1917)
==18731==    by 0x1C2735C0: gtk_signal_real_emit (gtksignal.c:1477)
==18731==    by 0x1C273B7F: gtk_signal_emit (gtksignal.c:552)
!! Warning:: No symmetry available for this molecule
No Symmetry for this model
INFO:: backup file coot-backup/Copy_of_1pyd.pdb_Chain_A_Tue_Jul_31_21:30:08_2007_modification_0.pdb.gz
INFO:: coordinates transformed by orthonal matrix:
|   -0.9211,  -0.05199,   -0.3858|
|  -0.02574,   -0.9807,    0.1936|
|   -0.3884,    0.1883,     0.902|
(     1.148,    -1.095,   -0.1226)
INFO: core rmsd achieved: 1.04335 Angstroems
      number of residues in reference structure: 537
      number of residues in moving structure:    537
      number of residues in aligned sections (reference):  537
      number of residues in aligned sections (moving):     537
      number of aligned residues:  528
      number of gaps:              4
      number of misdirections:     0
      number of SSE combinations:  4
      sequence identity:           99.4318%
number of Ca atoms in selections: 537 (moving) and 537 (reference)
Another Go...

==18731==
==18731== Invalid read of size 4
==18731==    at 0x81A1987: graphics_info_t::superpose_with_atom_selection(atom_selection_container_t, atom_s election_container_t, int, std::string, std::string, short) (graphics-info-superpose.cc:402)
==18731==    by 0x822FF88: superpose_with_chain_selection (c-interface-superpose.cc:136)
==18731==    by 0x8232162: execute_superpose (c-interface-superpose.cc:306)
==18731==    by 0x829B13D: on_superpose_dialog_superpose_button_clicked (callbacks.c:4748)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C2725C3: gtk_handlers_run (gtksignal.c:1917)
==18731==    by 0x1C2735C0: gtk_signal_real_emit (gtksignal.c:1477)
==18731==    by 0x1C273B7F: gtk_signal_emit (gtksignal.c:552)
==18731==    by 0x1C1E06FD: gtk_button_clicked (gtkbutton.c:336)
==18731==    by 0x1C1E1D2D: gtk_real_button_released (gtkbutton.c:861)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C273312: gtk_signal_real_emit (gtksignal.c:1440)

==18731==  Address 0x1C684A94 is 4 bytes before a block of size 2148 alloc'd
==18731==    at 0x1B9095DA: operator new[](unsigned) (vg_replace_malloc.c:138)
==18731==    by 0x1BE5316A: GetVectorMemory(int*&, unsigned, unsigned) (mattype_.cpp:182)
==18731==    by 0x1BDC4A11: CSuperpose::GetSuperposition(int*&, double*&, int&, int*&, int&, double[4] (&) [ 4], double&, int&, int&, double&, int&, double&) (ssm_superpose.cpp:395)
==18731==    by 0x1BDBA89D: CSSMAlign::Align(CMMDBManager*, CMMDBManager*, int, int, int, int) (ssm_align.cp p:206)
==18731==    by 0x81A0394: graphics_info_t::superpose_with_atom_selection(atom_selection_container_t, atom_s election_container_t, int, std::string, std::string, short) (graphics-info-superpose.cc:209)
==18731==    by 0x822FF88: superpose_with_chain_selection (c-interface-superpose.cc:136)
==18731==    by 0x8232162: execute_superpose (c-interface-superpose.cc:306)
==18731==    by 0x829B13D: on_superpose_dialog_superpose_button_clicked (callbacks.c:4748)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C2725C3: gtk_handlers_run (gtksignal.c:1917)
==18731==    by 0x1C2735C0: gtk_signal_real_emit (gtksignal.c:1477)
==18731==    by 0x1C273B7F: gtk_signal_emit (gtksignal.c:552)
==18731==
==18731== Invalid read of size 4
==18731==    at 0x81A1A69: graphics_info_t::superpose_with_atom_selection(atom_selection_container_t, atom_s election_container_t, int, std::string, std::string, short) (graphics-info-superpose.cc:427)
==18731==    by 0x822FF88: superpose_with_chain_selection (c-interface-superpose.cc:136)
==18731==    by 0x8232162: execute_superpose (c-interface-superpose.cc:306)
==18731==    by 0x829B13D: on_superpose_dialog_superpose_button_clicked (callbacks.c:4748)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C2725C3: gtk_handlers_run (gtksignal.c:1917)
==18731==    by 0x1C2735C0: gtk_signal_real_emit (gtksignal.c:1477)
==18731==    by 0x1C273B7F: gtk_signal_emit (gtksignal.c:552)
==18731==    by 0x1C1E06FD: gtk_button_clicked (gtkbutton.c:336)
==18731==    by 0x1C1E1D2D: gtk_real_button_released (gtkbutton.c:861)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C273312: gtk_signal_real_emit (gtksignal.c:1440)
==18731==  Address 0x1CC2CDC4 is 4 bytes before a block of size 2148 alloc'd
==18731==    at 0x1B9095DA: operator new[](unsigned) (vg_replace_malloc.c:138)
==18731==    by 0x1BE5316A: GetVectorMemory(int*&, unsigned, unsigned) (mattype_.cpp:182)
==18731==    by 0x1BDC4A3D: CSuperpose::GetSuperposition(int*&, double*&, int&, int*&, int&, double[4] (&) [ 4], double&, int&, int&, double&, int&, double&) (ssm_superpose.cpp:397)
==18731==    by 0x1BDBA89D: CSSMAlign::Align(CMMDBManager*, CMMDBManager*, int, int, int, int) (ssm_align.cp p:206)
==18731==    by 0x81A0394: graphics_info_t::superpose_with_atom_selection(atom_selection_container_t, atom_s election_container_t, int, std::string, std::string, short) (graphics-info-superpose.cc:209)
==18731==    by 0x822FF88: superpose_with_chain_selection (c-interface-superpose.cc:136)
==18731==    by 0x8232162: execute_superpose (c-interface-superpose.cc:306)
==18731==    by 0x829B13D: on_superpose_dialog_superpose_button_clicked (callbacks.c:4748)
==18731==    by 0x1C243356: gtk_marshal_NONE__NONE (gtkmarshal.c:312)
==18731==    by 0x1C2725C3: gtk_handlers_run (gtksignal.c:1917)
==18731==    by 0x1C2735C0: gtk_signal_real_emit (gtksignal.c:1477)
==18731==    by 0x1C273B7F: gtk_signal_emit (gtksignal.c:552)

-----
Wed Jul 18 09:09:16 BST 2007

	Hydrogens naming problem with shelx.

	Shelx calls hydrogens attached to ILE CG2 HG2A HG2B HG2C,
	whereas refmac names are HG21 HG22 HG33.

	There are lots of other problems like this.


-----

	gtk2 rotamers box needs to be made not small.


----
Sat Jul 21 10:25:29 MDT 2007

	problem with libcootaneer lib dependency when building in gtk1
	version.

	
-----
Wed Aug  1 19:48:19 BST 2007

	How about an Env Var to specify where to read and write
	startup files (state, history etc) so that you can run coot
	cleanly from the Desktop.


-----
Wed Aug  1 22:55:35 BST 2007

     Add Chiral Volume Outliers to  some validation graph.  Geometry?

     ie. make the blocks big and blue (c.f. missing atoms)


-----
Thu Aug  2 03:20:36 BST 2007

   add a test for overlap-ligands - quite tricky.


----
Thu Aug  2 14:43:06 BST 2007

	unexpanded symmetry labels have 0-indexed symm labels.  It
	should be 1-indexed - Steven Sheriff


-----
Thu Aug  2 14:47:07 BST 2007

   How about some flexibility in file name output?


     How difficult is it to create (or, maybe, How would one go about
     creating a) naming system for output PDB files that is consonant
     with my usage?  Currently COOT gives a default of
     input_file_name-coot-0.pdb.  I typically name my files
     model_0i.pdb for the file out of refinement (before ligand, hence
     the zero -- yes I do it too ;-) ) and my first output file as
     model_0o1.pdb.  If I do some "editing" outside of COOT, I might
     then create model_0i2.pdb and if I make some changes inside COOT,
     the output file would be model_0o2.pdb, etc.  After the next
     cycle of refinement, I would come in with model_1i.pdb, etc.

	-- Steven Sheriff


------
Thu Aug  2 15:40:32 BST 2007

   Add a test that adds lots of labels and deletes residues so that
   there are more atom labels than atoms left

	Use the label-all-atoms-in-residue function

-----
Thu Aug  2 23:47:38 BST 2007

    Add a greg test, generating a ideal RNA, make a copy. Jiggle the
    atoms of the copy a bit.

    Merge those molecules.

    Make a copy:
    Do a lsq of C in the copy to A in the copy. capture the matrix.
    (apply add-ncs-matrix rna-mol "C" "A" matrix)

    Show NCS ghosts - are they there?

* Done.


-----
Fri Aug  3 15:32:18 BST 2007

on cycle:

** (coot-real:2464): WARNING **: Couldn't find pixmap file: reside-info.svg

** (coot-real:2464): WARNING **: Couldn't find pixmap file: env-distances.png


----
Fri Aug  3 21:21:47 BST 2007

   after lsqing a copy and saving state

   on reading the state filel at startup, it says there are 2 pdbs in
   the state file, but only one gets loaded.

   Priority Low, Easy.


-----
Sat Aug  4 14:36:06 BST 2007

	how about adding assign-pir-sequence to the state file?
	Problem is we don't store raw input, just the decoded sequence.
	We need both.
	something should be std::pair<std::string, std::string (orig, seq)
	not just std::string

        Hmm... perhaps a simple class then, because we need a flag to
        say that this molecule has a sequence assigned to it.


--------
Wed Aug  8 12:21:09 BST 2007

	set-atom-attribute for multiple atoms.
	
	currently we do an atom selection and a rebonding (and redraw)
	for each atom attribute.

------
Sat Aug  4 15:22:06 BST 2007

        using multiple-set-atom-attribute will get rid of the
        intermediate rebonding and drawing.  How much will that speed
        things up (we still are doing the individual atom selections).

-----
Wed Aug  8 16:47:01 BST 2007

	Make the crash catcher add the coot version, platform etc.

------
Fri Aug 10 12:56:36 BST 2007

   add a side chain flip test.

   check that the OE1 was where the OE2 was
   and vica versa.

   also test torsions from running correct-nomenclature 

   
-------
Fri Aug 10 15:37:54 BST 2007

	Frank's SSM bug.

	Priority: Critical


        Also mail Kendall W. Nettles


-----
Fri Aug 10 16:43:38 BST 2007

	1a4x water at 416X - can't pick close-by symmetry water


-----
Mon Aug 13 15:43:54 BST 2007

	Add a test

	Use multiple wiggle ligands. Delete stuff and do it again.


-----
Mon Aug 13 16:52:03 BST 2007

	fit SAH into 2an3.

	It's really slow to converge.  Why?


-----
Fri Aug 17 14:18:40 BST 2007
	
	To analyse the 60 molecules crash:

	Make a test: 
	Run 6 times the ligand fitting of NPO to 43ca


-------
Mon Aug 20 18:08:16 BST 2007

	Add lots of tests for the space groups of shelx .res files
	using show-spacegroup




------

   Something is going wrong on bubbles with the texi files.

snafing coot docs...
ERROR: In procedure list:
ERROR: end of file
grep: coot-gui.texi.tmp: No such file or directory

* Fixed.

----
Sun Aug  5 00:29:27 BST 2007

   Revisit the --as-needed patch from Donnie Berkholz

   Try to apply (bits of) it and see what happens - problems on
   feisty, I guess

---
Sun Aug  5 00:30:26 BST 2007

   The X11 libs dependencies need to be revisited - I had to install
   some stuff to compile - they should be tested for in configure.

   Try with a gutsy pre-release?

----
Sun Aug  5 00:32:03 BST 2007

   The Coot FAQ should be written as a texi (article?) document, so
   that it has an index and toc.

----
Sat Aug 11 13:15:35 BST 2007

   Icons
   http://jimmac.musichall.cz/icons.php

   Think about icons for info dialog and the like.


----
Sat Aug 11 15:51:42 BST 2007

	world in connect-to-world is "cartoon globe" by lunanaut
	Open Clip Art


    crispy computer mouse for scroll wheel.


-----

http://www.itbusiness.ca/it/client/en/home/News.asp?id=44529&cid=11
	
The Novell SUSE Linux subscription model is considerably less painful,
Chevalier argues, because it doesn't hit the capital expense budget
and it can often be considered an operational expense, which is better
from a tax perspective.


--------


	Schedule some time to do the CISPEP cards vs refmac.

	Important.


-----
Tue Aug 21 14:26:00 BST 2007

   Thoughts for a tutorial or some such.

   "Assessing structure quality with Coot"
    (in response to EJD's comments on CCP4bb 2hr0)

    Structure with 0 occupancy

	What is a good (bad) Ramachandran?
	    
            What is a bad Kleywegt plot?
	
	Good (bad) geometry graph.

	Chiral volume outliers

	Cis-peptides, planar peptide restraints

	Good density fit graph (and how to scale it)

	Nomenclature errors in rotamers - and how to fix them
	   Missing atoms

	How to use with Molprobity (web output and local exes)

	B-factor variance.  What's good and bad.
	
   Priority: Low


-----
Tue Aug 21 14:44:14 BST 2007

	Note to self:

	B factor average, variance vs resolution for each residue type.

	Probably best to have a shell script to provide the pdb files
	
	c++ program reads pdbs and does b-factor analysis, 

            on completion appends to files "ARG.tab" "ASP.tab" etc
            with average and variance for each residue of that type in
            that pdb file.  Also the resolution.

	    only do 1 chain of each pdb file.

            use Coot libs - make it a Coot program.


    Priority: Low


-------
Tue Aug 21 16:50:52 BST 2007

  ionic waters:

  http://biochem.wustl.edu/~enrico/

  e.g. WASP
  Reference: Nayal, M., & Di Cera, E. (1996) J. Mol. Biol. 256: 228-234

  Looks straightforward.  Except symmetry must be used to find neighbours.

  GSoC project?




-----
Tue Aug 21 18:15:47 BST 2007

	blender's iksolver for inverse kinemetic (loop fitting).
	Source code not obviously in 2.44.

        But see this
   http://www.koders.com/cpp/fid45A6AC666E04B001C8A397CC9CEA3A46D801EB30.aspx?s=cdef%3aparser
        Hmm.

-----
Wed Aug 22 10:43:56 BST 2007

	Coot's configure should test for net-http and goosh.

	Or fail gracefully when they are not there.

------
Fri Aug 24 15:40:17 BST 2007

electron_density_gradient_at_point() in simple-restraint.cc used
template type double.  Would things be faster with a float?

clipper::Grad_orth<double>
coot::restraints_container_t::electron_density_gradient_at_point(const clipper::Coord_orth &ao);


------
Tue Aug 28 14:31:25 BST 2007

   And if the display manager would automatically resize itself when
   more objects are loaded, would be great.
 
  Marko Hyvnen
  Department of Biochemistry    
  University of Cambridge        

   Priority: Low, Difficulty: Medium.
   A thing for GSoC.


-----
Tue Aug 28 14:48:50 BST 2007

      http://blog.mithis.net/
      lython and SchemePy 

------
From: 	Matthew Wilce <matthew.wilce@med.monash.edu.au>
To: 	emsley@ysbl.york.ac.uk
Subject: 	Coot and polynucleotide
Date: 	Tue, 17 May 2005 10:39:44 +1000  (01:39 BST)

    functionality for both RNA and DNA

    the ability to change RNA into DNA and visa versa

    mutation of bases

    rotamer flipping (manual and automated)

    fragment library for each nucleotide

    a version of baton would be useful - either base to base and/or  
    phosphate to phosphate

      o is that still needed?

    insertion of nucleotides

    addition of a nucleotide at 3' or 5' end of polynucleotide

      o Done?


-----

   Venki Ramakrishnan:

	"CA mode" for nucleic acids should draw a P and C1' trace.

-----

   Write a FAQ for sucking of metal ligands into metal density.

-----

   make dist runs a scsh script.  configure should check for scsh?
   (not easy to convert to guile) 



 
